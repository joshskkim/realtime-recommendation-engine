# Real-time Recommendation Engine - Environment Configuration
# Copy this file to .env and update values as needed

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# DB_HOST=postgres
# DB_PORT=5432
# DB_NAME=recommendations
# DB_USER=recuser
# DB_PASSWORD=recpass123
DATABASE_URL=postgresql://recuser:recpass123@postgres:5432/recommendations

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_URL=redis://redis:6379
REDIS_DB=0

# Cache TTL settings (seconds)
CACHE_TTL_USER_PROFILE=3600        # 1 hour
CACHE_TTL_RECOMMENDATIONS=1800     # 30 minutes  
CACHE_TTL_ITEM_FEATURES=7200       # 2 hours
CACHE_TTL_POPULARITY=600           # 10 minutes

# =============================================================================
# KAFKA CONFIGURATION
# =============================================================================
KAFKA_BOOTSTRAP_SERVERS=kafka:29092
KAFKA_CLIENT_ID=recommendation-engine
KAFKA_GROUP_ID=rec-consumers

# Kafka Topics
KAFKA_TOPIC_USER_INTERACTIONS=user-interactions
KAFKA_TOPIC_USER_PROFILES=user-profiles
KAFKA_TOPIC_CONTENT_METADATA=content-metadata
KAFKA_TOPIC_RECOMMENDATIONS=recommendations-generated
KAFKA_TOPIC_MODEL_UPDATES=model-updates

# =============================================================================
# ML SERVICE CONFIGURATION
# =============================================================================
ML_SERVICE_HOST=0.0.0.0
ML_SERVICE_PORT=8000
ML_SERVICE_WORKERS=1
ML_SERVICE_DEBUG=true

# Model Configuration
MODEL_UPDATE_INTERVAL=3600          # 1 hour in seconds
MIN_INTERACTIONS_FOR_CF=5           # Minimum interactions for collaborative filtering
CONTENT_SIMILARITY_THRESHOLD=0.1    # Minimum similarity score for content-based
HYBRID_WEIGHTS_CF=0.4              # Collaborative filtering weight
HYBRID_WEIGHTS_CB=0.4              # Content-based weight  
HYBRID_WEIGHTS_POPULARITY=0.2       # Popularity weight

# Cold Start Configuration
COLD_START_MIN_POPULAR_ITEMS=20     # Number of popular items for new users
COLD_START_DEMOGRAPHIC_WEIGHT=0.6   # Weight for demographic-based recs

# =============================================================================
# API GATEWAY CONFIGURATION (Node.js)
# =============================================================================
API_GATEWAY_PORT=3000
API_GATEWAY_HOST=0.0.0.0
NODE_ENV=development

# Rate limiting
RATE_LIMIT_WINDOW_MS=900000         # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100         # Max requests per window

# =============================================================================
# USER SERVICE CONFIGURATION (C#)
# =============================================================================
USER_SERVICE_PORT=5000
ASPNETCORE_ENVIRONMENT=Development
ASPNETCORE_URLS=http://+:5000

# =============================================================================
# CACHE SERVICE CONFIGURATION (Rust)
# =============================================================================
CACHE_SERVICE_HOST=0.0.0.0
CACHE_SERVICE_PORT=8001
RUST_LOG=info
CACHE_SERVICE_WORKERS=4

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
JWT_SECRET=REPLACE_WITH_JWT_SECRET
JWT_EXPIRATION=86400                # 24 hours in seconds
API_KEY_HEADER=X-API-Key
INTERNAL_API_KEY=REPLACE_WITH_INTERNAL_API_KEY

# =============================================================================
# MONITORING AND OBSERVABILITY
# =============================================================================
ENABLE_METRICS=true
METRICS_PORT=9090
LOG_LEVEL=INFO
STRUCTURED_LOGGING=true

# Jaeger Tracing (optional)
JAEGER_AGENT_HOST=jaeger
JAEGER_AGENT_PORT=6831
ENABLE_TRACING=false

# =============================================================================
# BUSINESS LOGIC CONFIGURATION
# =============================================================================
# Recommendation Configuration
MAX_RECOMMENDATIONS_PER_REQUEST=50
DEFAULT_RECOMMENDATIONS_COUNT=10
ENABLE_EXPLANATION=true
ENABLE_AB_TESTING=true

# Content Categories (comma-separated)
CONTENT_CATEGORIES=movies,books,articles,products,music

# User Segments for personalization
USER_SEGMENTS=new,active,inactive,premium,free

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================
# Sample Data Generation
SAMPLE_USERS_COUNT=1000
SAMPLE_ITEMS_COUNT=5000  
SAMPLE_INTERACTIONS_COUNT=50000
DATA_GENERATION_SEED=42

# Development Tools
ENABLE_API_DOCS=true
ENABLE_DEBUG_ENDPOINTS=true
ENABLE_KAFKA_UI=true
ENABLE_REDIS_COMMANDER=true

# Hot Reload (Development)
ENABLE_HOT_RELOAD=true
WATCH_FILE_CHANGES=true

# =============================================================================
# PRODUCTION OVERRIDES (uncomment for production)
# =============================================================================
# ML_SERVICE_DEBUG=false
# ML_SERVICE_WORKERS=4
# LOG_LEVEL=WARNING
# ENABLE_DEBUG_ENDPOINTS=false
# ENABLE_KAFKA_UI=false
# ENABLE_REDIS_COMMANDER=false
# ENABLE_HOT_RELOAD=false

# =============================================================================
# EXTERNAL SERVICES (if needed)
# =============================================================================
# Third-party APIs (optional)
# EXTERNAL_CONTENT_API_URL=https://api.external-content.com
# EXTERNAL_USER_API_URL=https://api.user-service.com
# EXTERNAL_API_KEY=REPLACE_WITH_EXTERNAL_API_KEY

# =============================================================================
# LOAD TESTING CONFIGURATION
# =============================================================================
LOAD_TEST_DURATION=60               # seconds
LOAD_TEST_CONCURRENT_USERS=10
LOAD_TEST_REQUESTS_PER_USER=100